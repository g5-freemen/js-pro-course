{"version":3,"sources":["components/SelectCurrency.js","components/InputCurr.js","components/InputRub.js","components/service/FetchCurrencies.js","App.js","index.js"],"names":["SelectCurrency","props","onChooseCurr","currencies","useState","curr","setCurr","value","id","onChange","ev","target","map","item","Cur_ID","Cur_Abbreviation","Cur_Name","uuid","InputCurr","valueBYN","valueCurr","setValCurr","currency","calcCurrency","val","Cur_OfficialRate","Cur_Scale","toFixed","useEffect","className","style","color","fontWeight","disabled","choosenCur","find","InputRub","setBYN","Fragment","Number","a","getCachedCurrencies","fetch","response","json","data","localStorage","setItem","JSON","stringify","cachedData","getItem","Error","parsedData","parse","Date","toLocaleDateString","getCurrencies","App","setCurrencies","useCallback","FetchCurrencies","currData","href","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d5dbca65.chunk.js","sourcesContent":["import {useState} from 'react';\r\nimport uuid from 'react-uuid';\r\n\r\nexport default function SelectCurrency(props) {\r\n    const { onChooseCurr, currencies } = props;\r\n    const [ curr, setCurr ] = useState(currencies[0]);\r\n\r\n    function onCurrChange(ev) {\r\n        setCurr(ev.target.value);\r\n        onChooseCurr(ev.target.value);\r\n    }\r\n\r\n    return (\r\n        <select value={curr} id=\"selectCurrency\" onChange={onCurrChange}>\r\n        { currencies && currencies.map(item => \r\n            item.Cur_ID !== 299 &&\r\n            <option key={uuid()} value={item.Cur_Abbreviation} >\r\n                {item.Cur_Name}\r\n            </option> ) }\r\n        </select>\r\n    )\r\n}","import {useState, useEffect} from 'react';\r\nimport SelectCurrency from './SelectCurrency';\r\n\r\nexport default function InputCurr(props) {\r\n    const { valueBYN } = props;\r\n    const [ valueCurr, setValCurr ] = useState(valueBYN);\r\n    const { currencies } = props.currencies;\r\n    const [ currency, setCurr ] = useState([]);\r\n\r\n    function onChooseCurr(choosenCur) {\r\n        setCurr( currencies.find(item => item.Cur_Abbreviation === choosenCur) );\r\n        calcCurrency(valueBYN);\r\n    }\r\n\r\n    function calcCurrency (val) {\r\n        if (!currency.Cur_OfficialRate) return;\r\n        setValCurr((val / currency.Cur_OfficialRate * currency.Cur_Scale).toFixed(2));\r\n    }\r\n\r\n    useEffect( ()=> calcCurrency( valueBYN ), [valueBYN, currency] );\r\n\r\n    useEffect( ()=> setCurr(currencies[0] || []), [currencies] );\r\n\r\n    return (\r\n        <span className='input-field'>\r\n            <input value={ valueCurr }\r\n                   style={{ color: 'red',\r\n                            fontWeight: 'bold'\r\n                         }}\r\n                   disabled\r\n            />\r\n        <SelectCurrency onChooseCurr={onChooseCurr} currencies={currencies}/>\r\n        </span>\r\n    )\r\n}","import React, {useState} from 'react';\r\nimport InputCurr from './InputCurr';\r\n\r\nexport default function InputRub(props) {\r\n    const [ valueBYN, setBYN ] = useState(+props.valueBYN);\r\n    const { currencies } = props;\r\n\r\n    const onBYNChange = (ev) => {\r\n        if (ev.target.value === '') setBYN(0)\r\n        else if (!Number(+ev.target.value)) return;\r\n        \r\n        setBYN(+ev.target.value);\r\n    };\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <span className='input-field'>\r\n                <input value={valueBYN} onChange={onBYNChange}/>\r\n                <span className='input-title'>BYN</span>\r\n            </span>\r\n            <InputCurr valueBYN={valueBYN} currencies={currencies}/>\r\n        </React.Fragment>\r\n    )\r\n}","async function getCurrencies() {\r\n    try {\r\n        return getCachedCurrencies();\r\n    } catch (e) {\r\n        const response = await fetch('https://www.nbrb.by/api/exrates/rates?periodicity=0');\r\n        const data = await response.json();\r\n        localStorage.setItem('currencies', JSON.stringify(data));\r\n\r\n        return data;\r\n    }\r\n}\r\n\r\nfunction getCachedCurrencies() {\r\n    let cachedData = localStorage.getItem('currencies');\r\n    \r\n    if (!cachedData) throw new Error('No cached data');\r\n\r\n    let parsedData = JSON.parse(cachedData);\r\n    let cachedDate = new Date(parsedData[0].Date).toLocaleDateString();\r\n    let DateNow = new Date().toLocaleDateString();\r\n\r\n    if (cachedDate !== DateNow) throw new Error('Not actual data');\r\n\r\n    return parsedData;\r\n}\r\n\r\nexport default { getCurrencies }","import './App.css';\r\nimport InputRub from './components/InputRub';\r\nimport FetchCurrencies from './components/service/FetchCurrencies';\r\nimport React, {useState, useEffect, useCallback} from 'react';\r\n\r\nexport default function App() {\r\n  const [ currencies, setCurrencies ] = useState([]);\r\n\r\n  const getCurrencies = useCallback(async () => {\r\n    const currData = await FetchCurrencies.getCurrencies();\r\n    setCurrencies(currData);\r\n  }, []);\r\n\r\n  useEffect( () => getCurrencies(), [] );\r\n\r\n  return (\r\n      <div className=\"App\">\r\n        <div className=\"container\">\r\n          <h1>Currency Converter</h1>\r\n          <InputRub valueBYN={0} currencies={{currencies}} />\r\n        </div>\r\n        \r\n        <footer className=\"footer\">\r\n            <a className=\"footer__link\" href=\"https://github.com/g5-freemen\">\r\n                    Made by Anton Borkovskij, 2021\r\n            </a>\r\n        </footer>\r\n      </div>\r\n  )\r\n}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render( <App />, document.getElementById('root') );"],"sourceRoot":""}