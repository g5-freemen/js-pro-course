(this["webpackJsonpcurrency-conv-react"]=this["webpackJsonpcurrency-conv-react"]||[]).push([[0],{13:function(e,t,r){},15:function(e,t,r){"use strict";r.r(t);var n=r(1),c=r.n(n),a=r(6),u=r.n(a),s=r(3),i=r.n(s),o=r(4),l=r(2),j=(r(13),r(7)),b=r.n(j),f=r(0);function O(e){var t=e.onChooseCurr,r=e.currencies,c=Object(n.useState)(r[0]),a=Object(l.a)(c,2),u=a[0],s=a[1];return Object(f.jsx)("select",{value:u,id:"selectCurrency",onChange:function(e){s(e.target.value),t(e.target.value)},children:r&&r.map((function(e){return 299!==e.Cur_ID&&Object(f.jsx)("option",{value:e.Cur_Abbreviation,children:e.Cur_Name},b()())}))})}function p(e){var t=e.valueBYN,r=Object(n.useState)(t),c=Object(l.a)(r,2),a=c[0],u=c[1],s=e.currencies.currencies,i=Object(n.useState)([]),o=Object(l.a)(i,2),j=o[0],b=o[1];function p(e){j.Cur_OfficialRate&&u((e/j.Cur_OfficialRate*j.Cur_Scale).toFixed(2))}return Object(n.useEffect)((function(){return p(t)}),[t,j]),Object(n.useEffect)((function(){return b(s[0]||[])}),[s]),Object(f.jsxs)("span",{className:"input-field",children:[Object(f.jsx)("input",{value:a,style:{color:"red",fontWeight:"bold"},disabled:!0}),Object(f.jsx)(O,{onChooseCurr:function(e){b(s.find((function(t){return t.Cur_Abbreviation===e}))),p(t)},currencies:s})]})}function v(e){var t=Object(n.useState)(+e.valueBYN),r=Object(l.a)(t,2),a=r[0],u=r[1],s=e.currencies;return Object(f.jsxs)(c.a.Fragment,{children:[Object(f.jsxs)("span",{className:"input-field",children:[Object(f.jsx)("input",{value:a,onChange:function(e){if(""===e.target.value)u(0);else if(!Number(+e.target.value))return;u(+e.target.value)}}),Object(f.jsx)("span",{className:"input-title",children:"BYN"})]}),Object(f.jsx)(p,{valueBYN:a,currencies:s})]})}function h(){return(h=Object(o.a)(i.a.mark((function e(){var t,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",d());case 4:return e.prev=4,e.t0=e.catch(0),e.next=8,fetch("https://www.nbrb.by/api/exrates/rates?periodicity=0");case 8:return t=e.sent,e.next=11,t.json();case 11:return r=e.sent,localStorage.setItem("currencies",JSON.stringify(r)),e.abrupt("return",r);case 14:case"end":return e.stop()}}),e,null,[[0,4]])})))).apply(this,arguments)}function d(){var e=localStorage.getItem("currencies");if(!e)throw new Error("No cached data");var t=JSON.parse(e);if(new Date(t[0].Date).toLocaleDateString()!==(new Date).toLocaleDateString())throw new Error("Not actual data");return t}var x={getCurrencies:function(){return h.apply(this,arguments)}};function g(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),r=t[0],c=t[1],a=Object(n.useCallback)(Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.getCurrencies();case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)}))),[]);return Object(n.useEffect)((function(){return a()}),[]),Object(f.jsxs)("div",{className:"App",children:[Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)("h1",{children:"Currency Converter"}),Object(f.jsx)(v,{valueBYN:0,currencies:{currencies:r}})]}),Object(f.jsx)("footer",{className:"footer",children:Object(f.jsx)("a",{className:"footer__link",href:"https://github.com/g5-freemen",children:"Made by Anton Borkovskij, 2021"})})]})}u.a.render(Object(f.jsx)(g,{}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.d5dbca65.chunk.js.map